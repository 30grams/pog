{"version":3,"sources":["webpack:///./src/css/style.css","webpack:///./src/css/style.css?2fd6","webpack:///./src/js/app.js","webpack:///./src/js/game-map.js","webpack:///./src/js/game.js","webpack:///./src/js/scripts/TrackballControls.js","webpack:///./src/js/scripts/stats.min.js"],"names":["module","exports","__webpack_require__","push","i","./src/css/style.css","e","t","n","content","hmr","transform","insertInto","locals","o","a","__esModule","default","container","document","createElement","id","body","appendChild","_game2","scene","tileGeometry","_three","CylinderGeometry","tileRadius","tileHeight","material","MeshLambertMaterial","color","flatShading","overdraw","wireframe","shininess","computeFlatVertexNormals","j","tile","Mesh","position","x","tileWidth","z","Math","sqrt","y","floor","random","castShadow","receiveShadow","add","./src/js/game.js","Object","defineProperty","value","init","animate","THREE","s","camera","controls","renderer","stats","PerspectiveCamera","window","innerWidth","innerHeight","set","Scene","background","Color","_gameMap2","groundGeo","PlaneBufferGeometry","groundMat","MeshPhongMaterial","specular","setHSL","ground","rotation","PI","hemiLight","HemisphereLight","groundColor","hemiLightHelper","HemisphereLightHelper","dirLight","DirectionalLight","multiplyScalar","shadow","mapSize","width","height","left","right","top","bottom","far","dirLightHelper","DirectionalLightHelper","WebGLRenderer","setPixelRatio","devicePixelRatio","setSize","shadowMap","enabled","type","PCFSoftShadowMap","getElementById","domElement","_statsMin2","dom","TrackballControls","rotateSpeed","zoomSpeed","panSpeed","noZoom","noPan","staticMoving","dynamicDampingFactor","keys","addEventListener","render","onWindowResize","aspect","updateProjectionMatrix","handleResize","requestAnimationFrame","update","three__WEBPACK_IMPORTED_MODULE_0__","object","_this","this","STATE","NONE","ROTATE","ZOOM","PAN","TOUCH_ROTATE","TOUCH_ZOOM_PAN","screen","noRotate","minDistance","maxDistance","Infinity","target","Vector3","lastPosition","_state","_prevState","_eye","_movePrev","Vector2","_moveCurr","_lastAxis","_lastAngle","_zoomStart","_zoomEnd","_touchZoomDistanceStart","_touchZoomDistanceEnd","_panStart","_panEnd","target0","clone","position0","up0","up","changeEvent","startEvent","endEvent","box","getBoundingClientRect","d","ownerDocument","documentElement","pageXOffset","clientLeft","pageYOffset","clientTop","handleEvent","event","vector","angle","axis","quaternion","eyeDirection","objectUpDirection","objectSidewaysDirection","moveDirection","mouseChange","objectUp","pan","getMouseOnScreen","pageX","pageY","getMouseOnCircle","keydown","removeEventListener","keyCode","keyup","mousedown","preventDefault","stopPropagation","button","copy","mousemove","mouseup","dispatchEvent","mousewheel","deltaMode","deltaY","touchstart","touches","length","dx","dy","touchmove","touchend","contextmenu","rotateCamera","Quaternion","sub","normalize","crossVectors","setLength","setFromAxisAngle","applyQuaternion","zoomCamera","factor","panCamera","lengthSq","cross","subVectors","checkDistances","addVectors","lookAt","distanceToSquared","reset","dispose","prototype","create","EventDispatcher","constructor","assign","Stats","h","c","k","children","style","display","l","cssText","g","performance","Date","now","r","Panel","f","self","memory","REVISION","addPanel","showPanel","begin","end","usedJSHeapSize","jsHeapSizeLimit","setMode","round","u","m","p","q","b","getContext","font","textBaseline","fillStyle","fillRect","fillText","globalAlpha","v","min","max","drawImage"],"mappings":"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","file":"main.bundle.js","sourcesContent":["exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"body {\\n        margin: 0;\\n        background-color: black;\\n      }\\n      #container {\\n        background-color: black;\\n        \\n        margin: auto;\\n        align: center;\\n      }\\n      #scoreboard {\\n        text-align: center;\\n        font-family: Segoe UI, Helvetica, Ubuntu, sans-serif;\\n        color: white;\\n      }\\n      #scores {\\n        font-size:600%; \\n        padding:0; \\n        margin:0;\\n        color: white;\\n      }\\n      #title {\\n        background-color: white;\\n        color: black;\\n      }\\n      \", \"\"]);\n\n// exports\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!./style.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!./style.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","import '../css/style.css';\nimport setup from './game.js';\n\nif (process.env.NODE_ENV !== 'production') {\n  console.log('Looks like we are in development mode!');\n}\n\nvar container = document.createElement('div');\ncontainer.id = 'container';\n\ndocument.body.appendChild(container);\n\nsetup();\n\n/* CLEANER LOaDing\n\n\nasync function getComponent() {\n  // async import using a Babel pre-processor and the Syntax Dynamic Import Babel Plugin\n  var container = document.createElement('div');\n  container.id = 'container';\n\n  const THREE = await import(/* webpackChunkName: \"threejs\" / 'three');\n  // dynamic importing to separate a chunk\n    \n  return container;\n}\n\ngetComponent().then(component => {\n  let element = component(); \n  // Store the element to re-render on hot changes\n  document.body.appendChild(element);\n\n  if (module.hot) {\n    module.hot.accept('./game.js', function() {\n      console.log('Accepting the updated game module!');\n      document.body.removeChild(element);\n      element = component(); \n      // Re-render the \"component\" to update the click handler\n      document.body.appendChild(element);\n    })\n  }\n})\n\n*/\n","import { CylinderGeometry , Mesh, MeshLambertMaterial } from 'three';\n\nconst tileWidth = 1,\n tileHeight = 5;\nconst tileRadius = tileWidth / Math.sqrt(3);\n\nexport default function populate(scene) {\n\n  // TILES\n  let tileGeometry = new CylinderGeometry( tileRadius, tileRadius, tileHeight, 6, 1 );\n  let material = new MeshLambertMaterial( { color: 0x77dd77, flatShading: true, overdraw: 0.5, wireframe: false, shininess: 0 } );\n\n  tileGeometry.computeFlatVertexNormals();\n\n\n  for ( var i = -2; i < 3; i += 1 ) {\n    for ( var j = -2; j < 3; j += 1 ) {\n\n      var tile = new Mesh( tileGeometry, material );\n      tile.position.x = tileWidth * ( i + j * 0.5 ); \n      tile.position.z = (tileWidth * 0.5 *  Math.sqrt(3)) * j; \n      tile.position.y = ( -Math.floor(Math.random() * 5) * 0.2) - tileHeight/2; \n\n      tile.castShadow = true;\n      tile.receiveShadow = true;\n      scene.add( tile );\n    }\n  }\n}\n","import * as THREE from 'three';\r\nimport Stats from './scripts/stats.min.js';\r\nimport populate from './game-map.js'\r\nimport './scripts/TrackballControls.js';\r\n\r\nlet camera, controls, scene, renderer, stats;\r\nconst scale = 1;\r\n\r\nexport default function setup()\r\n{\r\n  // set up all the 3D objects in the scene   \r\n  init();\r\n\r\n  // and let's get cracking!\r\n  animate();\r\n}\r\n\r\n// set up all the 3D objects in the scene   \r\nexport function init()\r\n{ \r\n  camera = new THREE.PerspectiveCamera( 30, window.innerWidth / window.innerHeight, 1, 5000 );\r\n  camera.position.set( 0, .3, 7 );\r\n\r\n  // WORLD\r\n  scene = new THREE.Scene();\r\n  scene.background = new THREE.Color( 0x000000 );\r\n\r\n  // GROUND\r\n  populate(scene);\r\n\r\n  let groundGeo = new THREE.PlaneBufferGeometry( 10000, 10000 );\r\n  let groundMat = new THREE.MeshPhongMaterial( { color: 0xffffff, specular: 0x050505 } );\r\n  groundMat.color.setHSL( 0.095, 1, 0.75 );\r\n\r\n  let ground = new THREE.Mesh( groundGeo, groundMat );\r\n  ground.rotation.x = -Math.PI/2;\r\n  ground.position.y = -5;\r\n  ground.receiveShadow = true;\r\n\r\n  scene.add( ground );\r\n\r\n  // LIGHTS\r\n  let hemiLight = new THREE.HemisphereLight( 0xffffff, 0xffffff, 0.6 );\r\n  hemiLight.color.setHSL( 0.6, 1, 0.6 );\r\n  hemiLight.groundColor.setHSL( 0.095, 1, 0.75 );\r\n  hemiLight.position.set( 0, 50, 0 );\r\n\r\n  scene.add( hemiLight );\r\n\r\n  let hemiLightHelper = new THREE.HemisphereLightHelper( hemiLight, 10 );\r\n\r\n  scene.add( hemiLightHelper );\r\n\r\n\r\n  let dirLight = new THREE.DirectionalLight( 0xffffff, 1 );\r\n  dirLight.color.setHSL( 0.1, 1, 0.95 );\r\n  dirLight.position.set( -1, 1.75, 1 );\r\n  dirLight.position.multiplyScalar( 30 );\r\n\r\n  dirLight.castShadow = true;\r\n  dirLight.shadow.mapSize.width = 2048;\r\n  dirLight.shadow.mapSize.height = 2048;\r\n\r\n  scene.add( dirLight );\r\n\r\n  let d = 10;\r\n  dirLight.shadow.camera.left = -d;\r\n  dirLight.shadow.camera.right = d;\r\n  dirLight.shadow.camera.top = d;\r\n  dirLight.shadow.camera.bottom = -d;\r\n\r\n  dirLight.shadow.camera.far = 3500;\r\n  //dirLight.shadow.bias = -0.0001;\r\n\r\n  let dirLightHelper = new THREE.DirectionalLightHelper( dirLight, 10 )\r\n\r\n  scene.add( dirLightHelper );\r\n\r\n  // RENDERER\r\n  renderer = new THREE.WebGLRenderer();\r\n  renderer.setPixelRatio( window.devicePixelRatio );\r\n  renderer.setSize( window.innerWidth, window.innerHeight );\r\n\r\n  // SHADOWS\r\n  renderer.shadowMap.enabled = true;\r\n  renderer.shadowMap.type = THREE.PCFSoftShadowMap;\r\n  // to antialias the shadow\r\n\r\n  container = window.document.getElementById( 'container' );\r\n  container.appendChild( renderer.domElement );\r\n\r\n  // FPS\r\n  stats = new Stats();\r\n  container.appendChild( stats.dom );\r\n\r\n  // CONTROLS\r\n  controls = new THREE.TrackballControls( camera );\r\n\r\n  controls.rotateSpeed = 1.0;\r\n  controls.zoomSpeed = 1.2;\r\n  controls.panSpeed = 0.8;\r\n\r\n  controls.noZoom = false;\r\n  controls.noPan = false;\r\n\r\n  controls.staticMoving = true;\r\n  controls.dynamicDampingFactor = 0.3;\r\n\r\n  controls.keys = [ 65, 83, 68 ];\r\n\r\n  controls.addEventListener( 'change', render );\r\n\r\n  // resize\r\n  window.addEventListener( 'resize', onWindowResize, false );\r\n\r\n  // draw\r\n  render();\r\n}\r\n\r\nfunction onWindowResize() {\r\n  camera.aspect = window.innerWidth / window.innerHeight;\r\n  camera.updateProjectionMatrix();\r\n  renderer.setSize( window.innerWidth, window.innerHeight );\r\n  controls.handleResize();\r\n  render();\r\n}\r\n\r\nfunction animate() {\r\n  requestAnimationFrame( animate );\r\n  controls.update();\r\n}\r\n\r\nfunction render() {\r\n  renderer.render( scene, camera );\r\n  stats.update();\r\n}\r\n\r\n","/**\r\n * @author Eberhard Graether / http://egraether.com/\r\n * @author Mark Lundin \t/ http://mark-lundin.com\r\n * @author Simone Manini / http://daron1337.github.io\r\n * @author Luca Antiga \t/ http://lantiga.github.io\r\n */\r\n\r\nimport * as THREE from 'three';\r\n// import Three\r\n\r\n\r\nlet TrackballControls = function ( object, domElement ) {\r\n\r\n\tvar _this = this;\r\n\tvar STATE = { NONE: - 1, ROTATE: 0, ZOOM: 1, PAN: 2, TOUCH_ROTATE: 3, TOUCH_ZOOM_PAN: 4 };\r\n\r\n\tthis.object = object;\r\n\tthis.domElement = ( domElement !== undefined ) ? domElement : document;\r\n\r\n\t// API\r\n\r\n\tthis.enabled = true;\r\n\r\n\tthis.screen = { left: 0, top: 0, width: 0, height: 0 };\r\n\r\n\tthis.rotateSpeed = 1.0;\r\n\tthis.zoomSpeed = 1.2;\r\n\tthis.panSpeed = 0.3;\r\n\r\n\tthis.noRotate = false;\r\n\tthis.noZoom = false;\r\n\tthis.noPan = false;\r\n\r\n\tthis.staticMoving = false;\r\n\tthis.dynamicDampingFactor = 0.2;\r\n\r\n\tthis.minDistance = 0;\r\n\tthis.maxDistance = Infinity;\r\n\r\n\tthis.keys = [ 65 /*A*/, 83 /*S*/, 68 /*D*/ ];\r\n\r\n\t// internals\r\n\r\n\tthis.target = new THREE.Vector3();\r\n\r\n\tvar EPS = 0.000001;\r\n\r\n\tvar lastPosition = new THREE.Vector3();\r\n\r\n\tvar _state = STATE.NONE,\r\n\t_prevState = STATE.NONE,\r\n\r\n\t_eye = new THREE.Vector3(),\r\n\r\n\t_movePrev = new THREE.Vector2(),\r\n\t_moveCurr = new THREE.Vector2(),\r\n\r\n\t_lastAxis = new THREE.Vector3(),\r\n\t_lastAngle = 0,\r\n\r\n\t_zoomStart = new THREE.Vector2(),\r\n\t_zoomEnd = new THREE.Vector2(),\r\n\r\n\t_touchZoomDistanceStart = 0,\r\n\t_touchZoomDistanceEnd = 0,\r\n\r\n\t_panStart = new THREE.Vector2(),\r\n\t_panEnd = new THREE.Vector2();\r\n\r\n\t// for reset\r\n\r\n\tthis.target0 = this.target.clone();\r\n\tthis.position0 = this.object.position.clone();\r\n\tthis.up0 = this.object.up.clone();\r\n\r\n\t// events\r\n\r\n\tvar changeEvent = { type: 'change' };\r\n\tvar startEvent = { type: 'start' };\r\n\tvar endEvent = { type: 'end' };\r\n\r\n\r\n\t// methods\r\n\r\n\tthis.handleResize = function () {\r\n\r\n\t\tif ( this.domElement === document ) {\r\n\r\n\t\t\tthis.screen.left = 0;\r\n\t\t\tthis.screen.top = 0;\r\n\t\t\tthis.screen.width = window.innerWidth;\r\n\t\t\tthis.screen.height = window.innerHeight;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar box = this.domElement.getBoundingClientRect();\r\n\t\t\t// adjustments come from similar code in the jquery offset() function\r\n\t\t\tvar d = this.domElement.ownerDocument.documentElement;\r\n\t\t\tthis.screen.left = box.left + window.pageXOffset - d.clientLeft;\r\n\t\t\tthis.screen.top = box.top + window.pageYOffset - d.clientTop;\r\n\t\t\tthis.screen.width = box.width;\r\n\t\t\tthis.screen.height = box.height;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.handleEvent = function ( event ) {\r\n\r\n\t\tif ( typeof this[ event.type ] == 'function' ) {\r\n\r\n\t\t\tthis[ event.type ]( event );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar getMouseOnScreen = ( function () {\r\n\r\n\t\tvar vector = new THREE.Vector2();\r\n\r\n\t\treturn function getMouseOnScreen( pageX, pageY ) {\r\n\r\n\t\t\tvector.set(\r\n\t\t\t\t( pageX - _this.screen.left ) / _this.screen.width,\r\n\t\t\t\t( pageY - _this.screen.top ) / _this.screen.height\r\n\t\t\t);\r\n\r\n\t\t\treturn vector;\r\n\r\n\t\t};\r\n\r\n\t}() );\r\n\r\n\tvar getMouseOnCircle = ( function () {\r\n\r\n\t\tvar vector = new THREE.Vector2();\r\n\r\n\t\treturn function getMouseOnCircle( pageX, pageY ) {\r\n\r\n\t\t\tvector.set(\r\n\t\t\t\t( ( pageX - _this.screen.width * 0.5 - _this.screen.left ) / ( _this.screen.width * 0.5 ) ),\r\n\t\t\t\t( ( _this.screen.height + 2 * ( _this.screen.top - pageY ) ) / _this.screen.width ) // screen.width intentional\r\n\t\t\t);\r\n\r\n\t\t\treturn vector;\r\n\r\n\t\t};\r\n\r\n\t}() );\r\n\r\n\tthis.rotateCamera = ( function() {\r\n\r\n\t\tvar axis = new THREE.Vector3(),\r\n\t\t\tquaternion = new THREE.Quaternion(),\r\n\t\t\teyeDirection = new THREE.Vector3(),\r\n\t\t\tobjectUpDirection = new THREE.Vector3(),\r\n\t\t\tobjectSidewaysDirection = new THREE.Vector3(),\r\n\t\t\tmoveDirection = new THREE.Vector3(),\r\n\t\t\tangle;\r\n\r\n\t\treturn function rotateCamera() {\r\n\r\n\t\t\tmoveDirection.set( _moveCurr.x - _movePrev.x, _moveCurr.y - _movePrev.y, 0 );\r\n\t\t\tangle = moveDirection.length();\r\n\r\n\t\t\tif ( angle ) {\r\n\r\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\r\n\r\n\t\t\t\teyeDirection.copy( _eye ).normalize();\r\n\t\t\t\tobjectUpDirection.copy( _this.object.up ).normalize();\r\n\t\t\t\tobjectSidewaysDirection.crossVectors( objectUpDirection, eyeDirection ).normalize();\r\n\r\n\t\t\t\tobjectUpDirection.setLength( _moveCurr.y - _movePrev.y );\r\n\t\t\t\tobjectSidewaysDirection.setLength( _moveCurr.x - _movePrev.x );\r\n\r\n\t\t\t\tmoveDirection.copy( objectUpDirection.add( objectSidewaysDirection ) );\r\n\r\n\t\t\t\taxis.crossVectors( moveDirection, _eye ).normalize();\r\n\r\n\t\t\t\tangle *= _this.rotateSpeed;\r\n\t\t\t\tquaternion.setFromAxisAngle( axis, angle );\r\n\r\n\t\t\t\t_eye.applyQuaternion( quaternion );\r\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\r\n\r\n\t\t\t\t_lastAxis.copy( axis );\r\n\t\t\t\t_lastAngle = angle;\r\n\r\n\t\t\t} else if ( ! _this.staticMoving && _lastAngle ) {\r\n\r\n\t\t\t\t_lastAngle *= Math.sqrt( 1.0 - _this.dynamicDampingFactor );\r\n\t\t\t\t_eye.copy( _this.object.position ).sub( _this.target );\r\n\t\t\t\tquaternion.setFromAxisAngle( _lastAxis, _lastAngle );\r\n\t\t\t\t_eye.applyQuaternion( quaternion );\r\n\t\t\t\t_this.object.up.applyQuaternion( quaternion );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_movePrev.copy( _moveCurr );\r\n\r\n\t\t};\r\n\r\n\t}() );\r\n\r\n\r\n\tthis.zoomCamera = function () {\r\n\r\n\t\tvar factor;\r\n\r\n\t\tif ( _state === STATE.TOUCH_ZOOM_PAN ) {\r\n\r\n\t\t\tfactor = _touchZoomDistanceStart / _touchZoomDistanceEnd;\r\n\t\t\t_touchZoomDistanceStart = _touchZoomDistanceEnd;\r\n\t\t\t_eye.multiplyScalar( factor );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfactor = 1.0 + ( _zoomEnd.y - _zoomStart.y ) * _this.zoomSpeed;\r\n\r\n\t\t\tif ( factor !== 1.0 && factor > 0.0 ) {\r\n\r\n\t\t\t\t_eye.multiplyScalar( factor );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( _this.staticMoving ) {\r\n\r\n\t\t\t\t_zoomStart.copy( _zoomEnd );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_zoomStart.y += ( _zoomEnd.y - _zoomStart.y ) * this.dynamicDampingFactor;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.panCamera = ( function() {\r\n\r\n\t\tvar mouseChange = new THREE.Vector2(),\r\n\t\t\tobjectUp = new THREE.Vector3(),\r\n\t\t\tpan = new THREE.Vector3();\r\n\r\n\t\treturn function panCamera() {\r\n\r\n\t\t\tmouseChange.copy( _panEnd ).sub( _panStart );\r\n\r\n\t\t\tif ( mouseChange.lengthSq() ) {\r\n\r\n\t\t\t\tmouseChange.multiplyScalar( _eye.length() * _this.panSpeed );\r\n\r\n\t\t\t\tpan.copy( _eye ).cross( _this.object.up ).setLength( mouseChange.x );\r\n\t\t\t\tpan.add( objectUp.copy( _this.object.up ).setLength( mouseChange.y ) );\r\n\r\n\t\t\t\t_this.object.position.add( pan );\r\n\t\t\t\t_this.target.add( pan );\r\n\r\n\t\t\t\tif ( _this.staticMoving ) {\r\n\r\n\t\t\t\t\t_panStart.copy( _panEnd );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t_panStart.add( mouseChange.subVectors( _panEnd, _panStart ).multiplyScalar( _this.dynamicDampingFactor ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t}() );\r\n\r\n\tthis.checkDistances = function () {\r\n\r\n\t\tif ( ! _this.noZoom || ! _this.noPan ) {\r\n\r\n\t\t\tif ( _eye.lengthSq() > _this.maxDistance * _this.maxDistance ) {\r\n\r\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.maxDistance ) );\r\n\t\t\t\t_zoomStart.copy( _zoomEnd );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( _eye.lengthSq() < _this.minDistance * _this.minDistance ) {\r\n\r\n\t\t\t\t_this.object.position.addVectors( _this.target, _eye.setLength( _this.minDistance ) );\r\n\t\t\t\t_zoomStart.copy( _zoomEnd );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.update = function () {\r\n\r\n\t\t_eye.subVectors( _this.object.position, _this.target );\r\n\r\n\t\tif ( ! _this.noRotate ) {\r\n\r\n\t\t\t_this.rotateCamera();\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! _this.noZoom ) {\r\n\r\n\t\t\t_this.zoomCamera();\r\n\r\n\t\t}\r\n\r\n\t\tif ( ! _this.noPan ) {\r\n\r\n\t\t\t_this.panCamera();\r\n\r\n\t\t}\r\n\r\n\t\t_this.object.position.addVectors( _this.target, _eye );\r\n\r\n\t\t_this.checkDistances();\r\n\r\n\t\t_this.object.lookAt( _this.target );\r\n\r\n\t\tif ( lastPosition.distanceToSquared( _this.object.position ) > EPS ) {\r\n\r\n\t\t\t_this.dispatchEvent( changeEvent );\r\n\r\n\t\t\tlastPosition.copy( _this.object.position );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.reset = function () {\r\n\r\n\t\t_state = STATE.NONE;\r\n\t\t_prevState = STATE.NONE;\r\n\r\n\t\t_this.target.copy( _this.target0 );\r\n\t\t_this.object.position.copy( _this.position0 );\r\n\t\t_this.object.up.copy( _this.up0 );\r\n\r\n\t\t_eye.subVectors( _this.object.position, _this.target );\r\n\r\n\t\t_this.object.lookAt( _this.target );\r\n\r\n\t\t_this.dispatchEvent( changeEvent );\r\n\r\n\t\tlastPosition.copy( _this.object.position );\r\n\r\n\t};\r\n\r\n\t// listeners\r\n\r\n\tfunction keydown( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\twindow.removeEventListener( 'keydown', keydown );\r\n\r\n\t\t_prevState = _state;\r\n\r\n\t\tif ( _state !== STATE.NONE ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ROTATE ] && ! _this.noRotate ) {\r\n\r\n\t\t\t_state = STATE.ROTATE;\r\n\r\n\t\t} else if ( event.keyCode === _this.keys[ STATE.ZOOM ] && ! _this.noZoom ) {\r\n\r\n\t\t\t_state = STATE.ZOOM;\r\n\r\n\t\t} else if ( event.keyCode === _this.keys[ STATE.PAN ] && ! _this.noPan ) {\r\n\r\n\t\t\t_state = STATE.PAN;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction keyup( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\t_state = _prevState;\r\n\r\n\t\twindow.addEventListener( 'keydown', keydown, false );\r\n\r\n\t}\r\n\r\n\tfunction mousedown( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tif ( _state === STATE.NONE ) {\r\n\r\n\t\t\t_state = event.button;\r\n\r\n\t\t}\r\n\r\n\t\tif ( _state === STATE.ROTATE && ! _this.noRotate ) {\r\n\r\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\r\n\t\t\t_movePrev.copy( _moveCurr );\r\n\r\n\t\t} else if ( _state === STATE.ZOOM && ! _this.noZoom ) {\r\n\r\n\t\t\t_zoomStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\r\n\t\t\t_zoomEnd.copy( _zoomStart );\r\n\r\n\t\t} else if ( _state === STATE.PAN && ! _this.noPan ) {\r\n\r\n\t\t\t_panStart.copy( getMouseOnScreen( event.pageX, event.pageY ) );\r\n\t\t\t_panEnd.copy( _panStart );\r\n\r\n\t\t}\r\n\r\n\t\tdocument.addEventListener( 'mousemove', mousemove, false );\r\n\t\tdocument.addEventListener( 'mouseup', mouseup, false );\r\n\r\n\t\t_this.dispatchEvent( startEvent );\r\n\r\n\t}\r\n\r\n\tfunction mousemove( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tif ( _state === STATE.ROTATE && ! _this.noRotate ) {\r\n\r\n\t\t\t_movePrev.copy( _moveCurr );\r\n\t\t\t_moveCurr.copy( getMouseOnCircle( event.pageX, event.pageY ) );\r\n\r\n\t\t} else if ( _state === STATE.ZOOM && ! _this.noZoom ) {\r\n\r\n\t\t\t_zoomEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\r\n\r\n\t\t} else if ( _state === STATE.PAN && ! _this.noPan ) {\r\n\r\n\t\t\t_panEnd.copy( getMouseOnScreen( event.pageX, event.pageY ) );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction mouseup( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\t_state = STATE.NONE;\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', mousemove );\r\n\t\tdocument.removeEventListener( 'mouseup', mouseup );\r\n\t\t_this.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction mousewheel( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\t\t\r\n\t\tif ( _this.noZoom === true ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( event.deltaMode ) {\r\n\r\n\t\t\tcase 2:\r\n\t\t\t\t// Zoom in pages\r\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.025;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\t// Zoom in lines\r\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.01;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault:\r\n\t\t\t\t// undefined, 0, assume pixels\r\n\t\t\t\t_zoomStart.y -= event.deltaY * 0.00025;\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\t_this.dispatchEvent( startEvent );\r\n\t\t_this.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction touchstart( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\r\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\r\n\t\t\t\t_movePrev.copy( _moveCurr );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault: // 2 or more\r\n\t\t\t\t_state = STATE.TOUCH_ZOOM_PAN;\r\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\t\t\t\t_touchZoomDistanceEnd = _touchZoomDistanceStart = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\r\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\r\n\t\t\t\t_panStart.copy( getMouseOnScreen( x, y ) );\r\n\t\t\t\t_panEnd.copy( _panStart );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\t_this.dispatchEvent( startEvent );\r\n\r\n\t}\r\n\r\n\tfunction touchmove( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\t\tevent.stopPropagation();\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\t_movePrev.copy( _moveCurr );\r\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tdefault: // 2 or more\r\n\t\t\t\tvar dx = event.touches[ 0 ].pageX - event.touches[ 1 ].pageX;\r\n\t\t\t\tvar dy = event.touches[ 0 ].pageY - event.touches[ 1 ].pageY;\r\n\t\t\t\t_touchZoomDistanceEnd = Math.sqrt( dx * dx + dy * dy );\r\n\r\n\t\t\t\tvar x = ( event.touches[ 0 ].pageX + event.touches[ 1 ].pageX ) / 2;\r\n\t\t\t\tvar y = ( event.touches[ 0 ].pageY + event.touches[ 1 ].pageY ) / 2;\r\n\t\t\t\t_panEnd.copy( getMouseOnScreen( x, y ) );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction touchend( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\tswitch ( event.touches.length ) {\r\n\r\n\t\t\tcase 0:\r\n\t\t\t\t_state = STATE.NONE;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase 1:\r\n\t\t\t\t_state = STATE.TOUCH_ROTATE;\r\n\t\t\t\t_moveCurr.copy( getMouseOnCircle( event.touches[ 0 ].pageX, event.touches[ 0 ].pageY ) );\r\n\t\t\t\t_movePrev.copy( _moveCurr );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\t_this.dispatchEvent( endEvent );\r\n\r\n\t}\r\n\r\n\tfunction contextmenu( event ) {\r\n\r\n\t\tif ( _this.enabled === false ) return;\r\n\r\n\t\tevent.preventDefault();\r\n\r\n\t}\r\n\r\n\tthis.dispose = function() {\r\n\r\n\t\tthis.domElement.removeEventListener( 'contextmenu', contextmenu, false );\r\n\t\tthis.domElement.removeEventListener( 'mousedown', mousedown, false );\r\n\t\tthis.domElement.removeEventListener( 'wheel', mousewheel, false );\r\n\r\n\t\tthis.domElement.removeEventListener( 'touchstart', touchstart, false );\r\n\t\tthis.domElement.removeEventListener( 'touchend', touchend, false );\r\n\t\tthis.domElement.removeEventListener( 'touchmove', touchmove, false );\r\n\r\n\t\tdocument.removeEventListener( 'mousemove', mousemove, false );\r\n\t\tdocument.removeEventListener( 'mouseup', mouseup, false );\r\n\r\n\t\twindow.removeEventListener( 'keydown', keydown, false );\r\n\t\twindow.removeEventListener( 'keyup', keyup, false );\r\n\r\n\t};\r\n\r\n\tthis.domElement.addEventListener( 'contextmenu', contextmenu, false );\r\n\tthis.domElement.addEventListener( 'mousedown', mousedown, false );\r\n\tthis.domElement.addEventListener( 'wheel', mousewheel, false );\r\n\r\n\tthis.domElement.addEventListener( 'touchstart', touchstart, false );\r\n\tthis.domElement.addEventListener( 'touchend', touchend, false );\r\n\tthis.domElement.addEventListener( 'touchmove', touchmove, false );\r\n\r\n\twindow.addEventListener( 'keydown', keydown, false );\r\n\twindow.addEventListener( 'keyup', keyup, false );\r\n\r\n\tthis.handleResize();\r\n\r\n\t// force an update at start\r\n\tthis.update();\r\n\r\n};\r\n\r\nTrackballControls.prototype = Object.create( THREE.EventDispatcher.prototype );\r\nTrackballControls.prototype.constructor = TrackballControls;\r\n\r\nObject.assign(THREE, {TrackballControls: TrackballControls});\r\n// export as Object field\r\n","// stats.js - http://github.com/mrdoob/stats.js\r\nvar Stats=function(){function h(a){c.appendChild(a.dom);return a}function k(a){for(var d=0;d<c.children.length;d++)c.children[d].style.display=d===a?\"block\":\"none\";l=a}var l=0,c=document.createElement(\"div\");c.style.cssText=\"position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000\";c.addEventListener(\"click\",function(a){a.preventDefault();k(++l%c.children.length)},!1);var g=(performance||Date).now(),e=g,a=0,r=h(new Stats.Panel(\"FPS\",\"#0ff\",\"#002\")),f=h(new Stats.Panel(\"MS\",\"#0f0\",\"#020\"));\r\nif(self.performance&&self.performance.memory)var t=h(new Stats.Panel(\"MB\",\"#f08\",\"#201\"));k(0);return{REVISION:16,dom:c,addPanel:h,showPanel:k,begin:function(){g=(performance||Date).now()},end:function(){a++;var c=(performance||Date).now();f.update(c-g,200);if(c>e+1E3&&(r.update(1E3*a/(c-e),100),e=c,a=0,t)){var d=performance.memory;t.update(d.usedJSHeapSize/1048576,d.jsHeapSizeLimit/1048576)}return c},update:function(){g=this.end()},domElement:c,setMode:k}};\r\nStats.Panel=function(h,k,l){var c=Infinity,g=0,e=Math.round,a=e(window.devicePixelRatio||1),r=80*a,f=48*a,t=3*a,u=2*a,d=3*a,m=15*a,n=74*a,p=30*a,q=document.createElement(\"canvas\");q.width=r;q.height=f;q.style.cssText=\"width:80px;height:48px\";var b=q.getContext(\"2d\");b.font=\"bold \"+9*a+\"px Helvetica,Arial,sans-serif\";b.textBaseline=\"top\";b.fillStyle=l;b.fillRect(0,0,r,f);b.fillStyle=k;b.fillText(h,t,u);b.fillRect(d,m,n,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d,m,n,p);return{dom:q,update:function(f,\r\nv){c=Math.min(c,f);g=Math.max(g,f);b.fillStyle=l;b.globalAlpha=1;b.fillRect(0,0,r,m);b.fillStyle=k;b.fillText(e(f)+\" \"+h+\" (\"+e(c)+\"-\"+e(g)+\")\",t,u);b.drawImage(q,d+a,m,n-a,p,d,m,n-a,p);b.fillRect(d+n-a,m,a,p);b.fillStyle=l;b.globalAlpha=.9;b.fillRect(d+n-a,m,a,e((1-f/v)*p))}}};\"object\"===typeof module&&(module.exports=Stats);\r\n"],"sourceRoot":""}